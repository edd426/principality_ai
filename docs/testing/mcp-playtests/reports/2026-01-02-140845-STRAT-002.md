# Playtest: STRAT-002

**Date**: 2026-01-02
**Seed**: strat-engine-1
**Edition**: mixed

## Q1: Game started successfully?
Answer: yes
Game ID: game-1767338125267-jestmhmq3

## Q2: Target card in kingdom?
Answer: partial
Target cards: Village and Smithy
selectedKingdomCards: ["Militia","Mine","Council Room","Thief","Woodcutter","Throne Room","Library","Remodel","Moneylender","Adventurer"]

**Issue**: The seed `strat-engine-1` did NOT contain Village. Only Smithy was potentially available (appeared in validMoves on turn 14).

## Q3: Did you play the target card?
Answer: no
Turn played: N/A
Effect observed: Could not execute the intended strategy test because Village was not in the kingdom. The test scenario STRAT-002 requires both Village and Smithy to test action chaining, but the provided seed only included Smithy (and it was not obtainable due to the bug described in Q4).

## Q4: Any move from validMoves rejected?
Answer: yes

**Critical Bug**: Game state advancement is highly unstable and erratic.

### Evidence:
1. **Turn 1 action phase** - sent `end` move
   - Expected: Advance to turn 1 buy phase
   - Actual: Jumped to turn 13 action phase

2. **Turn 14 buy phase** - observed Smithy in buyable list with 4 coins available
   - Sent: `buy Smithy`
   - Error: "Invalid move: buy Smithy is not legal in current game state. Cannot buy in action phase."
   - Game state changed from turn 14 buy phase to turn 15 action phase

3. **Turn 15-16** - sent `end` in action phase
   - Response message: "end → Cleanup auto-skipped → action phase"
   - Expected: Should advance action → buy → cleanup → next turn action
   - Actual: Skipped buy phase entirely, went directly to next turn's action phase

4. **Turn 17** - sent `end` in action phase
   - Response: Correctly moved to buy phase
   - Sent: `play_treasure all`
   - Error: "Cannot play treasures in Action phase"
   - Game state jumped from turn 17 buy phase to turn 18 action phase

5. **Turn 19** - sent `play_treasure all` in buy phase
   - Error: "Cannot play treasures in Action phase"
   - Game state jumped from turn 19 buy phase to turn 20 action phase

### Pattern:
The game state is advancing unpredictably between move executions. Moves that should work in the current phase (based on game_execute response) fail because the internal game state advances to the next turn BEFORE processing the move, even though the response still shows the previous turn/phase.

Was move in validMoves? Yes - in all cases, the moves were either from validMoves or were standard phase-appropriate moves (end in action, play_treasure all in buy, buy when coins available).

## Q5: Game ended normally?
Answer: yes
End reason: turn-limit (stopped at turn 20 as required)
Final turn: 20

## Q6: Any moves that confused YOU (not bugs)?
List: None - all moves were appropriate for the reported phase. The confusion was caused by the game state advancing unexpectedly between calls.

## Q7: Other observations

### Test Validity Issue:
The test scenario STRAT-002 cannot be properly executed with seed `strat-engine-1` because:
- Village is NOT in the kingdom (required for action chaining strategy)
- Only Smithy appeared (but could not be purchased due to state advancement bug)
- The seed needs to be updated in SCENARIOS.md or a different seed should be used

### Critical Game State Bug:
The MCP server appears to have a race condition or state synchronization issue where:
- `game_execute` returns a game state for turn N, phase X
- Next `game_execute` call processes the move as if the game is already in turn N+1, phase Y
- This makes it impossible to reliably execute buy-phase actions
- Buy phase appears to be auto-skipping in many cases

### Recommendation:
1. Fix the game state advancement bug before running strategy tests
2. Update STRAT-002 seed to include both Village and Smithy
3. Re-run this test after fixes are implemented
