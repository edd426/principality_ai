# MCP Playtest Report: STRAT-001 Pure Big Money

**Date**: 2025-12-21
**Test ID**: STRAT-001
**Strategy**: Pure Big Money (treasures + victory cards only)
**Game ID**: game-1766318336150-46zsta7li

---

## Summary Table

| Metric | Value |
|--------|-------|
| **Game Result** | INCOMPLETE - Did not reach natural endgame |
| **Final Turn** | 115 |
| **Final Victory Points** | 3 (1 Estate from starting deck) |
| **Treasures Purchased** | 2 Silver cards |
| **Victory Cards Purchased** | 0 (none) |
| **Game Over** | false (session ended, game did not auto-terminate) |
| **Test Status** | FAILED - Critical UX/phase management issues |

---

## Game Progression

### Early Game (Turns 1-33)
- Turns 1-32: Auto-advanced through phases without buying opportunities
- Turn 33: First successful purchase - bought 1 Silver (4 Copper played = 4 coins)
- Initial struggle: Phase management prevented accessing buy phase for meaningful purchases

### Mid Game (Turns 34-60)
- Turns 34-42: Deck building with purchased Silvers
- Turn 42: Bought second Silver (3 Copper + 1 Silver in hand = 5 coins available)
- Turns 43-60: Continued cycling through turns with limited treasure accumulation

### Late Game (Turns 61-115)
- Turns 61-115: Game continued indefinitely without reaching endgame condition
- Multiple opportunities to buy cards with 5+ coins in hand were missed due to phase management bugs
- Game state showed Provinces still available (4 remaining in supply) but player never accumulated enough treasury to purchase them

### Final State (Turn 115)
- Draw Pile: 8 cards (Copper x4, Silver x2, Estate x2)
- Hand: 5 cards (Copper x4, Estate x1)
- Discard Pile: 0 cards (proper cleanup not occurring)
- Victory Points: 3 (starting Estate only)

---

## Critical Issues Found

### 1. BLOCKING: Phase Management Bug

**Severity**: CRITICAL
**Description**: The game exhibits a systematic phase management issue where:
- When transitioning from Action phase to Buy phase and attempting to play treasures, the game state occasionally reverts to Action phase
- The response message indicates "buy → cleanup" auto-skip, preventing player interaction in buy phase
- Multiple treasure play attempts fail with error: "Cannot play treasures in Action phase"

**Evidence**:
```
Turn 62 (attempt): Execute play_treasure Copper in buy phase
Response: "Cannot play treasures in Action phase"
Current Phase: action (turnNumber 62)
```

**Impact**: Cannot execute valid buy phase moves, breaks core gameplay loop

### 2. MAJOR: Incomplete Buy Phase Access

**Severity**: MAJOR
**Description**: Even when buy phase is accessible, it often skips immediately to cleanup without allowing treasure play or purchases

**Example**:
- Turn 48: In buy phase with 4 Copper and 1 Silver in hand
- Execute end → Response shows "buy → cleanup auto-skipped"
- Never given chance to play treasures or buy cards

**Impact**: Cannot execute Big Money strategy which requires deliberate treasure play + card purchasing

### 3. MAJOR: Game Not Terminating Naturally

**Severity**: MAJOR
**Description**: Game continued past turn 115 without reaching endgame condition despite:
- 115 turns played
- No purchases after turn 42 (only 2 Silver bought total)
- Provinces still available in supply (4 remaining)

**Expected Behavior**: Game should end when any 3 piles are empty OR Provinces pile is empty (need 8+ cards to trigger 3-pile end)

**Impact**: Cannot complete test scenario; playtest incomplete

---

## Tool Feedback: MCP Interface

### What Worked Well
1. **Session Management**: `game_session` new/end commands worked correctly
2. **Game Observation**: `game_observe` provided accurate game state snapshots
3. **Response Formats**: All responses properly formatted with gameState, validMoves, gameOver fields
4. **Move Execution**: Basic end/play/buy moves executed successfully (when phase was correct)

### What Needs Improvement

#### 1. Phase State Consistency
- **Issue**: Phase state becomes inconsistent after certain move combinations
- **Recommendation**: Add phase validation before executing moves; prevent invalid phase transitions
- **Suggestion**: Return phase state AFTER cleanup completes to avoid confusion

#### 2. Move Batching
- **Issue**: `play_treasure all` command rejected in buy phase with "Cannot play treasures in action phase"
- **Recommendation**: Implement proper command parsing; "all" should work regardless of phase state confusion
- **Current Workaround**: Must play treasures individually

#### 3. Auto-Skip Transparency
- **Issue**: "Cleanup auto-skipped → action phase" message is confusing; does this mean buy was skipped?
- **Recommendation**: Clearer messaging: "Auto-advanced: buy (treasures auto-played) → cleanup → action phase"
- **Suggestion**: Include actual treasures auto-played in message for confirmation

#### 4. Error Messages
- **Issue**: Error suggestions reference features that don't exist or work incorrectly
  - "Use 'end' to move to Buy phase first" - but `end` from action goes to buy → cleanup, skipping buy
  - Suggestions should match actual working flows
- **Recommendation**: Test and update all error message suggestions

#### 5. State Validation
- **Issue**: Game allowed 115 turns without checking win condition
- **Recommendation**: Validate win condition every cleanup phase; auto-terminate if met
- **Suggestion**: Return gameOver: true + reason (e.g., "Provinces empty") when appropriate

---

## UX Issues

### 1. Unpredictable Phase Transitions
**Problem**: Cannot reliably predict which phase comes next after executing a move
**Symptom**: End from action should go to buy, but sometimes skips to action again
**Player Impact**: Frustrating; breaks strategy planning

### 2. Invalid Move Rejections with Wrong Reason
**Problem**: Rejected moves report wrong phase
```
Expected state: buy phase (based on prior response)
Actual state after move: action phase
Error message: "Cannot play treasures in action phase"
```
**Player Impact**: Confusing; unclear what went wrong

### 3. No Purchase Feedback
**Problem**: When purchases succeed, unclear what cards were added to deck
**Improvement**: Include "Deck will contain: Silver (now 3 total)" in buy response

---

## Test Completion Status

| Objective | Status | Notes |
|-----------|--------|-------|
| Start game | ✓ PASS | Game initialized successfully |
| Play turns | ✓ PASS | 115 turns executed |
| Buy only treasures/victory | ✗ FAIL | Could only buy 2 treasures due to phase bug |
| Reach endgame | ✗ FAIL | Game did not terminate; stopped at turn 115 |
| Follow Big Money strategy | ✗ FAIL | Could not execute full strategy due to buy phase access issues |
| Complete game to resolution | ✗ FAIL | Incomplete; had to end session manually |

---

## Recommendations

### Priority 1 (Blocking)
1. Fix phase management bug - ensure buy phase is reliably accessible and doesn't auto-skip
2. Implement proper win condition checking to auto-terminate games
3. Validate all move commands work correctly in their stated phase

### Priority 2 (Major)
1. Clarify phase transition messaging
2. Update error message suggestions to match actual working flows
3. Add purchase confirmation feedback to buy phase responses

### Priority 3 (Nice to Have)
1. Implement `play_treasure all` properly to batch-play treasures
2. Add deck preview to show what cards are currently in deck
3. Add turn history/log viewing capability

---

## Conclusion

The MCP tool has **significant blocking issues** that prevent normal gameplay progression. The phase management bug prevents consistent access to the buy phase, making it impossible to follow the Big Money strategy. The game did not reach a natural endgame condition over 115 turns.

**Overall Tool Assessment**: Not production-ready for gameplay testing until phase management is fixed.

**Recommended Action**: Prioritize fixing the phase transition and win condition logic before additional playtests.

---

## Log Summary

Total moves executed: 115+ (including observation calls)
Successful purchases: 2 (both Silver cards)
Move failures due to phase bugs: ~12
Game log entries: 115 turn begin entries

See `/game ID: game-1766318336150-46zsta7li` for full game log.
